require('chai').should()
UserAgentMatcher = require '../../UserAgentMatcher'

describe "UserAgentMatcher", ->
	describe "desktop devices", ->
		describe "chrome", ->
			it "should recognize Windows as desktop device", ->
				matcher = new UserAgentMatcher "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.60 Safari/537.17"
				matcher.matchDesktop().should.equal(true)
				matcher.matchTablet().should.equal(false)
				matcher.matchTV().should.equal(false)
				matcher.matchBot().should.equal(false)
				matcher.matchPhone().should.equal(false)
			it "should recognize Mac as desktop device", ->
				matcher = new UserAgentMatcher "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1309.0 Safari/537.17"
				matcher.matchDesktop().should.equal(true)
				matcher.matchTablet().should.equal(false)
				matcher.matchTV().should.equal(false)
				matcher.matchBot().should.equal(false)
				matcher.matchPhone().should.equal(false)
			it "should recognize Linux as desktop device", ->
				matcher = new UserAgentMatcher "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.9 Safari/536.5"
				matcher.matchDesktop().should.equal(true)
				matcher.matchTablet().should.equal(false)
				matcher.matchTV().should.equal(false)
				matcher.matchBot().should.equal(false)
				matcher.matchPhone().should.equal(false)
		describe "firefox", ->
			it "should recognize Windows as desktop device", ->
				matcher = new UserAgentMatcher "Mozilla/5.0 (Windows NT 6.2; Win64; x64; rv:16.0.1) Gecko/20121011 Firefox/16.0.1"
				matcher.matchDesktop().should.equal(true)
				matcher.matchTablet().should.equal(false)
				matcher.matchTV().should.equal(false)
				matcher.matchBot().should.equal(false)
				matcher.matchPhone().should.equal(false)
			it "should recognize Mac as desktop device", ->
				matcher = new UserAgentMatcher "Mozilla/6.0 (Macintosh; I; Intel Mac OS X 11_7_9; de-LI; rv:1.9b4) Gecko/2012010317 Firefox/10.0a4"
				matcher.matchDesktop().should.equal(true)
				matcher.matchTablet().should.equal(false)
				matcher.matchTV().should.equal(false)
				matcher.matchBot().should.equal(false)
				matcher.matchPhone().should.equal(false)
			it "should recognize Linux as desktop device", ->
				matcher = new UserAgentMatcher "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:15.0) Gecko/20100101 Firefox/15.0.1"
				matcher.matchDesktop().should.equal(true)
				matcher.matchTablet().should.equal(false)
				matcher.matchTV().should.equal(false)
				matcher.matchBot().should.equal(false)
				matcher.matchPhone().should.equal(false)
		describe "internet explorer", ->
			it "should recognize Windows as desktop device", ->
				matcher = new UserAgentMatcher "Mozilla/5.0 (compatible; MSIE 10.6; Windows NT 6.1; Trident/5.0; InfoPath.2; SLCC1; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; .NET CLR 2.0.50727) 3gpp-gba UNTRUSTED/1.0"
				matcher.matchDesktop().should.equal(true)
				matcher.matchTablet().should.equal(false)
				matcher.matchTV().should.equal(false)
				matcher.matchBot().should.equal(false)
				matcher.matchPhone().should.equal(false)
		describe "opera", ->
			it "should recognize Windows as desktop device", ->
				matcher = new UserAgentMatcher "Opera/9.80 (Windows NT 6.0) Presto/2.12.388 Version/12.14"
				matcher.matchDesktop().should.equal(true)
				matcher.matchTablet().should.equal(false)
				matcher.matchTV().should.equal(false)
				matcher.matchBot().should.equal(false)
				matcher.matchPhone().should.equal(false)
			it "should recognize Mac as desktop device", ->
				matcher = new UserAgentMatcher "Opera/9.80 (Macintosh; Intel Mac OS X; U; nl) Presto/2.6.30 Version/10.61"
				matcher.matchDesktop().should.equal(true)
				matcher.matchTablet().should.equal(false)
				matcher.matchTV().should.equal(false)
				matcher.matchBot().should.equal(false)
				matcher.matchPhone().should.equal(false)
			it "should recognize Linux as desktop device", ->
				matcher = new UserAgentMatcher "Opera/9.80 (X11; Linux i686; U; en) Presto/2.5.27 Version/10.60"
				matcher.matchDesktop().should.equal(true)
				matcher.matchTablet().should.equal(false)
				matcher.matchTV().should.equal(false)
				matcher.matchBot().should.equal(false)
				matcher.matchPhone().should.equal(false)
	describe "tablet devices", ->
		it "should recognize IPad as tablet device", ->
			matcher = new UserAgentMatcher "Mozilla/5.0 (iPad; U; CPU OS 3_2 like Mac OS X; en-us) AppleWebKit/531.21.10 (KHTML, like Gecko) Version/4.0.4 Mobile/7B334b Safari/531.21.10"
			matcher.matchDesktop().should.equal(false)
			matcher.matchTablet().should.equal(true)
			matcher.matchTV().should.equal(false)
			matcher.matchBot().should.equal(false)
			matcher.matchPhone().should.equal(false)
		it "should recognize Galaxy as tablet device", ->
			matcher = new UserAgentMatcher "Mozilla/5.0 (Linux; U; Android 2.2; en-gb; SAMSUNG GT-P1000 Tablet Build/MASTER) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1"
			matcher.matchDesktop().should.equal(false)
			matcher.matchTablet().should.equal(true)
			matcher.matchTV().should.equal(false)
			matcher.matchBot().should.equal(false)
			matcher.matchPhone().should.equal(false)
	describe "tv devices", ->
		it "should recognize GoogleTV as tv device", ->
			matcher = new UserAgentMatcher "Mozilla/5.0 (X11; U; Linux i686; en-US) AppleWebKit/533.4 (KHTML, like Gecko) Chrome/5.0.375.127 Large Screen Safari/533.4 GoogleTV/162671"
			matcher.matchDesktop().should.equal(false)
			matcher.matchTablet().should.equal(false)
			matcher.matchTV().should.equal(true)
			matcher.matchBot().should.equal(false)
			matcher.matchPhone().should.equal(false)
		it "should recognize PlayStation 3 as tv device", ->
			matcher = new UserAgentMatcher "Mozilla/5.0 (PLAYSTATION 3; 3.55)"
			matcher.matchDesktop().should.equal(false)
			matcher.matchTablet().should.equal(false)
			matcher.matchTV().should.equal(true)
			matcher.matchBot().should.equal(false)
			matcher.matchPhone().should.equal(false)
		it "should recognize Wii as tv device", ->
			matcher = new UserAgentMatcher "Opera/9.30 (Nintendo Wii; U; ; 2071; Wii Shop Channel/1.0; en)"
			matcher.matchDesktop().should.equal(false)
			matcher.matchTablet().should.equal(false)
			matcher.matchTV().should.equal(true)
			matcher.matchBot().should.equal(false)
			matcher.matchPhone().should.equal(false)
	describe "bot devices", ->
		it "should recognize GoogleBot as bot device", ->
			matcher = new UserAgentMatcher "Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)"
			matcher.matchDesktop().should.equal(false)
			matcher.matchTablet().should.equal(false)
			matcher.matchTV().should.equal(false)
			matcher.matchBot().should.equal(true)
			matcher.matchPhone().should.equal(false)
		it "should recognize BingBot as bot device", ->
			matcher = new UserAgentMatcher "Mozilla/5.0 (compatible; bingbot/2.0; +http://www.bing.com/bingbot.htm)"
			matcher.matchDesktop().should.equal(false)
			matcher.matchTablet().should.equal(false)
			matcher.matchTV().should.equal(false)
			matcher.matchBot().should.equal(true)
			matcher.matchPhone().should.equal(false)
		it "should recognize Charlotte as bot device", ->
			matcher = new UserAgentMatcher "Mozilla/5.0 (compatible; Charlotte/1.1; http://www.searchme.com/support/)"
			matcher.matchDesktop().should.equal(false)
			matcher.matchTablet().should.equal(false)
			matcher.matchTV().should.equal(false)
			matcher.matchBot().should.equal(true)
			matcher.matchPhone().should.equal(false)
	describe "phone devices", ->
		describe "android", ->
			it "should recognize LG smartphone as phone device", ->
				matcher = new UserAgentMatcher "Mozilla/5.0 (Linux; U; Android 4.0.3; ko-kr; LG-L160L Build/IML74K) AppleWebkit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30"
				matcher.matchDesktop().should.equal(false)
				matcher.matchTablet().should.equal(false)
				matcher.matchTV().should.equal(false)
				matcher.matchBot().should.equal(false)
				matcher.matchPhone().should.equal(true)
			it "should recognize HTC smartphone as phone device", ->
				matcher = new UserAgentMatcher "Mozilla/5.0 (Linux; U; Android 4.0.3; de-ch; HTC Sensation Build/IML74K) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30"
				matcher.matchDesktop().should.equal(false)
				matcher.matchTablet().should.equal(false)
				matcher.matchTV().should.equal(false)
				matcher.matchBot().should.equal(false)
				matcher.matchPhone().should.equal(true)
			it "should recognize Sony Ericsson smartphone as phone device", ->
				matcher = new UserAgentMatcher "Mozilla/5.0 (Linux; U; Android 2.1-update1; es-mx; SonyEricssonE10a Build/2.0.A.0.504) AppleWebKit/530.17 (KHTML, like Gecko) Version/4.0 Mobile Safari/530.17"
				matcher.matchDesktop().should.equal(false)
				matcher.matchTablet().should.equal(false)
				matcher.matchTV().should.equal(false)
				matcher.matchBot().should.equal(false)
				matcher.matchPhone().should.equal(true)
		it "should recognize Blackberry smartphone as phone device", ->
			matcher = new UserAgentMatcher "Mozilla/5.0 (BlackBerry; U; BlackBerry 9900; en) AppleWebKit/534.11+ (KHTML, like Gecko) Version/7.1.0.346 Mobile Safari/534.11+"
			matcher.matchDesktop().should.equal(false)
			matcher.matchTablet().should.equal(false)
			matcher.matchTV().should.equal(false)
			matcher.matchBot().should.equal(false)
			matcher.matchPhone().should.equal(true)
		it "should recognize Windows smartphone as phone device", ->
			matcher = new UserAgentMatcher "Mozilla/5.0 (compatible; MSIE 9.0; Windows Phone OS 7.5; Trident/5.0; IEMobile/9.0)"
			matcher.matchDesktop().should.equal(false)
			matcher.matchTablet().should.equal(false)
			matcher.matchTV().should.equal(false)
			matcher.matchBot().should.equal(false)
			matcher.matchPhone().should.equal(true)